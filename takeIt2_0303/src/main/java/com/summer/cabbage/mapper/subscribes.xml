<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper 
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="subscribes">
	<select id="selectNo" parameterType="int" resultType="Subscribe">
		SELECT NO,PRODUCT_NO productNo,TAKER_NO takerNo,STATUS,ADDR_OPT addrOpt,DELIVERY_START deliveryStart,PRICE,TAKER_MSG takerMsg,CANCEL_DATE cancelDate,ZIP_CODE zipCode,ADDR,ADDR_DETAIL addrDetail,DEL_LOCATION delLocation,RECEIVER,REGDATE				
		FROM subscribes
		WHERE no=#{no}		
	</select>
	<!-- 03-03 강필규 추가 -->
	
	<!-- 총 주문조회 상품리스트 -->
	<select id="selectOrderCheckList" parameterType="int" resultType="Subscribe">
		SELECT s.NO,s.PRODUCT_NO productNo,s.TAKER_NO takerNo,s.STATUS,s.ADDR_OPT addrOpt,s.DELIVERY_START deliveryStart,s.PRICE,s.TAKER_MSG takerMsg,s.CANCEL_DATE cancelDate,s.ZIP_CODE zipCode,s.ADDR,s.ADDR_DETAIL addrDetail,s.DEL_LOCATION delLocation,s.RECEIVER,s.phone,p.name productName,m.id id,s.REGDATE
		FROM subscribes s, products p, members m
		WHERE m.no = s.taker_no AND s.PRODUCT_NO = p.NO AND p.giver_no = #{giverNo} AND s.status = 'Y' 
	</select>
	<!-- 총 주문조회 갯수 count -->
	<select id="selectOrderCheckListCount" parameterType="int" resultType="int">
		SELECT count(*)
		FROM subscribes s, products p, members m
		WHERE m.no = s.taker_no AND s.PRODUCT_NO = p.NO AND p.giver_no = #{giverNo} AND s.status = 'Y'
	</select>
	
	<!-- //03-03 강필규 추가 -->
</mapper>

